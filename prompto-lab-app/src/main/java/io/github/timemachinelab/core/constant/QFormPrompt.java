package io.github.timemachinelab.core.constant;

public class QFormPrompt {

    public final static String Q_FROM_PROMPT =
            """
                    ## 表单形式的题目

                    ### 描述

                    快速收集用户需求的核心要素，为后续深度挖掘提供基础信息框架。

                    ### 触发条件判断逻辑

                    AI评估用户输入的信息完整度：

                    + 缺少基本目标描述
                    + 缺少关键背景信息
                    + 总体描述过于简单
                    + **重要约束**：只有当存在多个相关性高的子问题且能一次性收集时才使用表单
                    + **避免滥用**：表单提问用户体验较差，能用其他形式解决的优先使用其他方式

                    ### 输出格式规范

                    + 你必须要按照标准的无误的 json 格式给我返回结果，其他的什么都不要给我

                    ```json
                    {
                      "question": "表单引导语",
                      "type": "form",
                      "parentId": "对话ID",
                      "fields": [
                        {
                          "id": "字段标识",
                          "question": "字段问题描述",
                          "type": "input|single|muti",
                          "options": [
                            {
                              "id": "选项标识",
                              "label": "选项显示文本"
                            }
                          ], // 仅single/muti类型需要
                          "desc": "字段的详细说明或引导", // 可选
                          "weight": "权重分数"
                        }
                      ],
                      "desc": "表单的详细说明、填写引导或补充解释" // 可选
                    }
                    ```

                    ### 规则

                    **1. question字段生成规则**

                    + AI根据用户当前描述情况生成合适的引导语
                    + 需体现对用户已有信息的理解和对补充信息的需求
                    + 保持简洁友好的表达方式

                    **2. fields数组生成规则**

                    + **字段数量**：2-5个字段
                    + AI分析用户描述，识别缺失的关键信息维度并生成对应字段
                    + 按weight权重从高到低排序
                    + 优先使用选择类型，减少用户键盘输入

                    **3. 单个field对象规则**

                    + **id**：使用英文标识，与question内容对应
                    + **question**：AI生成的简洁明确问题，不超过20字
                    + **type**：优先级顺序选择
                      - single：是否类型或单选题
                      - muti：多选题
                      - **input**：预期一句话或简短描述
                    + **options**：仅single/muti类型需要的选项数组
                    + **desc**：可选字段，当字段需要补充说明时使用
                    + **weight**：权重分数1-10，最重要的信息为10分，依次递减

                    **4. options数组生成规则**

                    + **适用类型**：仅当type为single或muti时需要
                    + **选项数量**：single类型2-4个选项，muti类型3-6个选项
                    + **选项内容**：
                      - **id**：英文标识，用于程序处理
                      - **label**：中文显示文本，简洁明确
                    + **是否类型**：single类型常用于是/否、有/无等二元选择
                    + **多选类型**：muti类型用于可选择多个答案的情况

                    **5. desc字段规则**

                    + **表单级desc**：表单整体的说明引导
                    + **字段级desc**：单个字段的补充说明
                    + **长度限制**：不超过100字
                    + **作用**：帮助用户理解填写要求

                    **6. 权重评分规则**

                    + AI评估每个字段信息对理解用户需求的重要程度
                    + 权重越高的字段排在fields数组越前面
                    + 权重相同时，优先考虑更基础的信息维度

                    **7. 表单使用约束**

                    + **谨慎使用**：表单提问用户体验相对较差
                    + **使用条件**：必须是多个相关性高的问题能够一次性收集
                    + **替代优先**：单一问题或简单追问优先使用其他交互方式

                    **8. 信息收集原则**

                    + 专注基础要素收集，避免深度细节
                    + 基于用户已提供信息，只询问缺失部分
                    + 为后续交互类型提供足够的上下文信息

                    **9. 字段去重逻辑**

                    + AI分析用户输入中已明确表达的信息维度
                    + 已知信息对应的字段不再包含在fields中
                    + 确保每个字段都有收集价值

                    ### 用户回答的JSON格式

                    + other1，other2 代表用户自己的输入内容

                    **具体示例**

                    ```json
                    {
                      "questionId": "question_001",
                      "answer": [
                        {
                          "id": "urgency",
                          "value": ["urgent"]
                        },
                        {
                          "id": "required_features",
                          "value": ["user_login", "payment_system", "other1"]
                        },
                        {
                          "id": "project_type",
                          "value": ["website"]
                        },
                        {
                          "id": "description",
                          "value": ["需要开发一个电商网站"]
                        }
                      ]
                    }
                    ```

                    """;
}
